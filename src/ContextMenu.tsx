import { Group } from '@visx/group';
import "./App.scss";
import { useState } from "react";

interface TreeNode {
    name: string;
    children?: this[];
}

var optionNo: number = 0;

var width = 140;
var height = 144;


export default function ContextMenu({ coords, clickHandler }: { coords: any, clickHandler: any }) {

    const [clickedOption, setClickedOption] = useState("");

    function clickModify() {
        clickHandler({ clickedOption: "modify" })
    }

    function clickRemove() {
        clickHandler({ clickedOption: "remove" })
    }

    function clickDelete() {
        clickHandler({ clickedOption: "delete" })
    }

    return (
        <Group top={coords.x} left={coords.y} id="context-menu">
            <svg width={width} height={height} viewBox="0 0 204 164" fill="none" xmlns="http://www.w3.org/2000/svg">
                <g filter="url(#filter0_ddd)">
                    <rect x="4" y="4" width="192" height="152" rx="14" fill="white" />
                </g>
                <mask id="mask1" mask-type="alpha" maskUnits="userSpaceOnUse" x="4" y="4" width="192" height="152">
                    <rect x="4" y="4" width="192" height="152" rx="14" fill="white" />
                </mask>
                <mask id="mask3" mask-type="alpha" maskUnits="userSpaceOnUse" x="4" y="4" width="192" height="152">
                    <rect x="4" y="4" width="192" height="152" rx="14" fill="white" />
                </mask>
                <Group mask="url(#mask1)" className="context-option" onClick={clickModify}>
                    <rect x="4" y="4" width="192" height="50.6667" />
                    <path d="M85.8849 24.8182V35H87.973V28.348H88.0575L90.6925 34.9503H92.1143L94.7493 28.3729H94.8338V35H96.9219V24.8182H94.267L91.4631 31.6591H91.3438L88.5398 24.8182H85.8849ZM108.052 29.9091C108.052 26.5781 105.984 24.679 103.284 24.679C100.57 24.679 98.5165 26.5781 98.5165 29.9091C98.5165 33.2251 100.57 35.1392 103.284 35.1392C105.984 35.1392 108.052 33.2401 108.052 29.9091ZM105.869 29.9091C105.869 32.0668 104.845 33.2351 103.284 33.2351C101.718 33.2351 100.699 32.0668 100.699 29.9091C100.699 27.7514 101.718 26.5831 103.284 26.5831C104.845 26.5831 105.869 27.7514 105.869 29.9091ZM113.256 35C116.358 35 118.238 33.081 118.238 29.8991C118.238 26.7273 116.358 24.8182 113.286 24.8182H109.647V35H113.256ZM111.799 33.1555V26.6626H113.172C115.081 26.6626 116.09 27.6371 116.09 29.8991C116.09 32.1712 115.081 33.1555 113.167 33.1555H111.799ZM121.985 24.8182H119.832V35H121.985V24.8182ZM123.756 35H125.909V30.794H130.05V29.0192H125.909V26.593H130.498V24.8182H123.756V35ZM131.349 24.8182L135.063 31.4006V35H137.2V31.4006L140.914 24.8182H138.503L136.181 29.2031H136.082L133.76 24.8182H131.349Z" fill="black" fill-opacity="0.56" />

                    <path d="M21.3936 41.3218C21.9048 39.6621 22.7406 36.5354 23.2305 35.345C23.6263 34.3844 23.996 33.419 24.4503 32.964C24.9045 32.5098 25.6772 32.5453 26.1433 33.0098C26.1433 33.0098 28.0939 34.333 28.793 35.2083C29.6684 35.9051 30.9932 37.8602 30.9932 37.8602C31.4594 38.3263 31.4949 39.0981 31.0407 39.5531C30.5856 40.0073 29.6202 40.377 28.6587 40.7728C27.4689 41.2626 24.3412 42.0968 22.6814 42.6095C22.3978 42.6964 21.3067 41.6054 21.3936 41.3218Z" fill="#D99E82" />
                    <path d="M38.4418 18.9737C38.2256 19.1898 38.0541 19.4464 37.937 19.7288C37.82 20.0112 37.7598 20.3139 37.7598 20.6196C37.7598 20.9253 37.82 21.228 37.937 21.5104C38.0541 21.7928 38.2256 22.0494 38.4418 22.2655L41.7338 25.5581C42.1705 25.9943 42.7626 26.2393 43.3798 26.2393C43.9971 26.2393 44.5892 25.9943 45.0259 25.5581L48.3187 22.2655C48.7549 21.8288 49 21.2368 49 20.6196C49 20.0024 48.7549 19.4104 48.3187 18.9737L45.0266 15.6819C44.8105 15.4657 44.5539 15.2942 44.2715 15.1772C43.989 15.0602 43.6863 15 43.3806 15C43.0749 15 42.7722 15.0602 42.4898 15.1772C42.2073 15.2942 41.9507 15.4657 41.7346 15.6819L38.4418 18.9737Z" fill="#EA596E" />
                    <path d="M24.4506 32.964L27.745 36.2581L31.0338 39.5483L43.3804 27.2036L36.7955 20.62L24.4506 32.964Z" fill="#FFCC4D" />
                    <path d="M23.8779 42.2421C23.8779 42.2421 21.7377 43.4184 21.1594 42.8401C20.5811 42.2619 21.7638 40.1266 21.7638 40.1266C21.7638 40.1266 23.791 40.1645 23.8779 42.2421V42.2421Z" fill="#292F33" />
                    <path d="M47.4956 23.0886L40.9107 16.5043L36.7963 20.6192L43.3804 27.2036L47.4956 23.0886Z" fill="#CCD6DD" />
                    <path d="M46.6724 23.911L40.0883 17.3274L39.2651 18.1506L45.8492 24.7341L46.6724 23.911ZM45.0267 25.5589L38.4419 18.9745L37.6187 19.7976L44.2035 26.3812L45.0267 25.5589Z" fill="#99AAB5" />
                </Group>
                <Group className="context-option" onClick={clickRemove}>
                    <rect x="4" y="55" width="192" height="50.6667" />
                    <path d="M85.8849 85H88.0376V81.3906H89.6087L91.5376 85H93.9141L91.7514 81.0426C92.9098 80.5455 93.5511 79.5362 93.5511 78.1442C93.5511 76.1207 92.2138 74.8182 89.902 74.8182H85.8849V85ZM88.0376 79.6605V76.5781H89.4893C90.7322 76.5781 91.3338 77.13 91.3338 78.1442C91.3338 79.1534 90.7322 79.6605 89.4993 79.6605H88.0376ZM95.0724 85H101.953V83.2251H97.2251V80.794H101.58V79.0192H97.2251V76.593H101.933V74.8182H95.0724V85ZM103.645 74.8182V85H105.733V78.348H105.817L108.452 84.9503H109.874L112.509 78.3729H112.594V85H114.682V74.8182H112.027L109.223 81.6591H109.104L106.3 74.8182H103.645ZM125.812 79.9091C125.812 76.5781 123.744 74.679 121.044 74.679C118.33 74.679 116.276 76.5781 116.276 79.9091C116.276 83.2251 118.33 85.1392 121.044 85.1392C123.744 85.1392 125.812 83.2401 125.812 79.9091ZM123.629 79.9091C123.629 82.0668 122.605 83.2351 121.044 83.2351C119.478 83.2351 118.459 82.0668 118.459 79.9091C118.459 77.7514 119.478 76.5831 121.044 76.5831C122.605 76.5831 123.629 77.7514 123.629 79.9091ZM128.672 74.8182H126.28L129.795 85H132.569L136.079 74.8182H133.693L131.227 82.554H131.133L128.672 74.8182ZM137.305 85H144.186V83.2251H139.458V80.794H143.813V79.0192H139.458V76.593H144.166V74.8182H137.305V85Z" fill="black" fill-opacity="0.56" />

                    <path d="M49 79.5C49 86.9557 42.9557 93 35.5 93C28.0443 93 22 86.9557 22 79.5C22 72.0443 28.0443 66 35.5 66C42.9557 66 49 72.0443 49 79.5Z" fill="#BE1931" />
                    <path d="M46 81C46 81.3978 45.842 81.7794 45.5607 82.0607C45.2794 82.342 44.8978 82.5 44.5 82.5H26.5C26.1022 82.5 25.7206 82.342 25.4393 82.0607C25.158 81.7794 25 81.3978 25 81V78C25 77.6022 25.158 77.2206 25.4393 76.9393C25.7206 76.658 26.1022 76.5 26.5 76.5H44.5C44.8978 76.5 45.2794 76.658 45.5607 76.9393C45.842 77.2206 46 77.6022 46 78V81Z" fill="white" />

                </Group>
                <Group mask="url(#mask1)" className="context-option" onClick={clickDelete}>
                    <rect x="4" y="106" width="192" height="50.6667" />
                    <path d="M89.4943 136C92.5966 136 94.4759 134.081 94.4759 130.899C94.4759 127.727 92.5966 125.818 89.5241 125.818H85.8849V136H89.4943ZM88.0376 134.156V127.663H89.4098C91.3189 127.663 92.3281 128.637 92.3281 130.899C92.3281 133.171 91.3189 134.156 89.4048 134.156H88.0376ZM96.0705 136H102.951V134.225H98.2232V131.794H102.578V130.019H98.2232V127.593H102.931V125.818H96.0705V136ZM104.643 136H111.161V134.225H106.795V125.818H104.643V136ZM112.586 136H119.467V134.225H114.739V131.794H119.094V130.019H114.739V127.593H119.447V125.818H112.586V136ZM120.771 127.593H123.888V136H126.016V127.593H129.133V125.818H120.771V127.593ZM130.51 136H137.391V134.225H132.663V131.794H137.018V130.019H132.663V127.593H137.371V125.818H130.51V136Z" fill="#FF0000" />

                    <path d="M43.75 120.778L42.4616 123.932L41.1731 120.778H38.1781L36.7871 124.183L35.3954 120.778H32.6054L31.2144 124.183L29.8227 120.778H26.8269L25.5385 123.932L24.25 120.778H22.5405L25.238 140.231H42.7613L45.4595 120.778H43.75ZM39.6752 121.943L41.4512 126.405L39.5727 131.003L37.7982 126.66L39.6752 121.943V121.943ZM34 122.201L35.7745 126.659L34 131.002L32.2255 126.659L34 122.201ZM28.3248 121.943L30.2019 126.66L28.4274 131.003L26.5489 126.405L28.3248 121.943V121.943ZM25.303 129.535L25.5385 128.943L27.3794 133.568L26.2434 136.349L25.303 129.535V129.535ZM26.8269 140.222L28.4274 136.201L30.0278 140.222H26.8269ZM29.476 133.568L31.2144 129.201L32.9521 133.568L31.2144 137.822L29.476 133.568V133.568ZM32.3996 140.222L34 136.201L35.6005 140.222H32.3996ZM35.048 133.568L36.7856 129.201L38.5233 133.568L36.7856 137.822L35.048 133.568ZM37.9722 140.222L39.5727 136.201L41.1731 140.222H37.9722ZM41.8665 136.617L40.6206 133.568L42.4616 128.944L42.7584 129.69L41.8665 136.617Z" fill="#9AAAB4" />
                    <path d="M44.1111 141.611C44.1111 141.243 43.9589 140.889 43.688 140.629C43.4172 140.369 43.0498 140.222 42.6667 140.222H25.3333C24.9502 140.222 24.5828 140.369 24.312 140.629C24.0411 140.889 23.8889 141.243 23.8889 141.611C23.8889 141.979 24.0411 142.333 24.312 142.593C24.5828 142.854 24.9502 143 25.3333 143H42.6667C43.0498 143 43.4172 142.854 43.688 142.593C43.9589 142.333 44.1111 141.979 44.1111 141.611ZM47 119.389C47 119.021 46.8478 118.667 46.5769 118.407C46.306 118.146 45.9386 118 45.5556 118H22.4444C22.0614 118 21.694 118.146 21.4231 118.407C21.1522 118.667 21 119.021 21 119.389C21 119.757 21.1522 120.111 21.4231 120.371C21.694 120.631 22.0614 120.778 22.4444 120.778H45.5556C45.9386 120.778 46.306 120.631 46.5769 120.371C46.8478 120.111 47 119.757 47 119.389Z" fill="#67757F" />
                </Group>
                <defs>
                    <filter id="filter0_ddd" x="0" y="0" width="204" height="164" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
                        <feFlood flood-opacity="0" result="BackgroundImageFix" />
                        <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" />
                        <feOffset dx="4" dy="4" />
                        <feGaussianBlur stdDeviation="2" />
                        <feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0" />
                        <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow" />
                        <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" />
                        <feOffset dx="4" />
                        <feGaussianBlur stdDeviation="2" />
                        <feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0" />
                        <feBlend mode="normal" in2="effect1_dropShadow" result="effect2_dropShadow" />
                        <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" />
                        <feOffset dy="4" />
                        <feGaussianBlur stdDeviation="2" />
                        <feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0" />
                        <feBlend mode="normal" in2="effect2_dropShadow" result="effect3_dropShadow" />
                        <feBlend mode="normal" in="SourceGraphic" in2="effect3_dropShadow" result="shape" />
                    </filter>
                </defs>
            </svg>
        </Group>
    );
}